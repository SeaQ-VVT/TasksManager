rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Bất kỳ ai cũng xem được dữ liệu
    // Chưa đăng nhập chỉ được viết comment
    // Đăng nhập thì được quyền ghi toàn bộ
    match /{document=**} {
      allow read: if true;

      // Cho phép tạo comment nếu chưa đăng nhập
      allow create: if request.resource.data.type == "comment";

      // Cho phép ghi nếu đã đăng nhập
      allow write: if request.auth != null;
    }
  }
}